---
title: "Internal Tracking Changelog"
date: "2026-02-03 06:00"
updated: "2026-02-13 02:37"
version: "1.1"
scope: "Tracking and process notes"
---

# .claude CHANGELOG

## [Unreleased]

### Changed - 2026-02-13 02:36

- `web_search` ahora se activa por defecto en runtime (`isWebSearchEnabled`: `undefined => true`).
- Se mantiene `WEB_SEARCH_ENABLED=false` como kill-switch operativo.
- `.env.example` actualizado para reflejar activaci√≥n por defecto.

### Changed - 2026-02-12 11:15

- Implemented `web_search` runtime wiring in `src/modules/ai/application/proactive-agent.ts` using AI Gateway built-in tool exposure.
- Added feature flag support (`WEB_SEARCH_ENABLED`) in env/runtime flags/types and `.env.example`.
- Added Gemini preference heuristic (`google/gemini-2.5-flash-lite`) for web-search-like queries.
- Validation completed with `npm run typecheck`, `npm run test:unit`, and targeted `proactive-agent-web-search` unit test.
- Fixed `web_search` post-tool fallback to parse object results and avoid repeated generic response.
- Strengthened prompt instructions for `web_search` and added deep text extraction fallback for nested tool payloads.
- Added retry-context handling for short confirmations (e.g. "si") after failed `web_search`.
- Fixed root cause in SDK parsing: tool outputs for gateway searches are read from `toolResults[].output` (not only `result`).
- Added JSDoc headers for web-search detection/retry/result-extraction/synthesis helpers in `proactive-agent` to improve maintainability and handoff clarity.

### Changed - 2026-02-12 09:10

- Added SDD spec `specs/27-web-search-tool-runtime.md` for internet search tool integration (`web_search`) using AI Gateway and rollout by feature flag.
- Updated `specs/00-inventario-general.md` with new feature row `27 - Web Search Tool Runtime`.
- Updated tracking artifacts (`session`, `status`, `todo`, `decisions`) to reflect discovery and spec-first phase.

### Changed - 2026-02-12 04:14

- Installed `just` locally (`1.46.0`) and validated project recipes.
- Updated all tracking artifacts and resumed backlog from `docs/master-tracker.md` priority queue.
- Set active execution target to `specs/04-ai-processing-orchestration.md`.

### Changed - 2026-02-12 03:59

- Implemented session continuity system with `just` commands: `checkpoint`, `sync-master`, `resume`, `check-tracking`, `close-session`.
- Added `scripts/generate-master-tracker.mjs` and autogenerated `docs/master-tracker.md` from `specs/*.md`.
- Added `scripts/resume-session.mjs` and enforced `.claude/handoff.md` contract.
- Extended `scripts/check-tracking-files.mjs` with specs contract + continuity checks for critical staged paths.
- Updated `.husky/pre-commit` to run `just sync-master` and `just check-tracking`.

### Changed - 2026-02-12 03:13

- Rebased and pushed tracking governance commit to `origin/main`.
- Added PR-only CI guardrail in `.github/workflows/ci.yml` to require tracking/changelog updates on critical path changes.

### Changed - 2026-02-12 08:05

- Added `docs/tracking-best-practices.md` as single operational source for cross-session tracking.
- Updated `CLAUDE.md` and `AGENTS.md` with tracking contract, cadence, and evidence standards.
- Added `.github/pull_request_template.md` with mandatory tracking checklist for behavior-changing work.
- Revalidated tracking guardrails via `npm run check:tracking`.
- Recovered `npm run typecheck` by clearing stale `tsconfig.tsbuildinfo` cache.

### Changed - 2026-02-07 16:41

- Replaced local `tesseract.js` OCR path with multimodal `vision-pipeline`.
- Added `specs/17-general-image-processing.md` with status and rollout criteria.
- Added unit tests for visual input classification.
- Removed `tesseract.js` dependency from project.

### Changed - 2026-02-07 15:43

- Added `scripts/compact-tracking-files.mjs` for automatic tracking compaction.
- Added `npm run tracking:compact` in `package.json`.
- Verified compaction + `npm run check:tracking` in sequence.

### Changed - 2026-02-07 15:38

- Tightened tracking size limits in `scripts/check-tracking-files.mjs`.
- Added anti-accumulation checks for session, todo, decisions, and internal changelog files.
- Updated `AGENTS.md` with explicit compact tracking policy.
- Compacted `.claude/session.md`, `.claude/status.md`, `.claude/todo.md`, `.claude/decisions.md`, and `.claude/CHANGELOG.md`.

### Changed - 2026-02-07 15:25

- Updated `whatsapp-api-expert` skill guidance baseline from v23.0 to v24.0.

### Changed - 2026-02-07 12:15

- Completed AI Gateway migration notes and related tracking updates.

## Historical Summary (before 2026-02-07 12:00)

- Initial tracking system was created and expanded quickly.
- Multiple broad documentation sessions were logged in detail.
- Internal changelog became too verbose for operational use.
- Current policy shifts this file to concise operational deltas only.

### Changed - 2026-02-12 13:02

- Updated `src/modules/ai/application/proactive-agent.ts` to force LLM synthesis after tool calls with empty assistant text.
- Added resilient retry path: if primary generation fails with tools, re-run one pass without tools.
- Added/updated tests in `tests/unit/proactive-agent-web-search.test.ts` for synthesis and no-tools recovery behavior.
